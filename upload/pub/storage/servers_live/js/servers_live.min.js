function ls_parse_data(){var a=_holder=_parent="";$("tr[class^='server']").each(function(){a=$(this).data("server-address");$.ajax({type:"GET",dataType:"json",request:a,timeout:3e3,url:RN_URL+"servers/fetch/"+a+"/",success:function(b){a=b.request;_holder="tr.server[data-server-address='"+a+"']";if(b.error!="none"){show_error(a,b.error);return}$(_holder+" td#map").html(b.details.map.toLowerCase());$(_holder+" td#players a").html(b.details.players_on+"/"+b.details.players_max);$(_holder+" td#ping").html(b.details.ping+" ms");if(b.details.bots>0){$(_holder+" td#players").append("("+b.details.bots+" bots)")}_parent=$("tr.players[data-server-address='"+a+"'] table tbody");if(b.players.length==0){_parent.html('<tr><td colspan="7" class="center">No players online.</td></tr>')}{$.each(b.players,function(a,b){var c=b.is_bot?"(<em>bot</em>)":"";_parent.append('<tr><td colspan="5">'+b.nick+" "+c+'</td> <td class="center">'+b.score+'</td> <td class="center">'+b.time_gmt+"</td></tr>")})}},error:function(a,b,c){show_error(this.request,c)}})});$("td#players a").click(function(a){a.preventDefault();var b=$(this).parent().parent().data("server-address");var c=$("tr.players[data-server-address='"+b+"']");if(c.hasClass("hide")){c.removeClass("hide")}else{c.addClass("hide")}})}function show_error(a,b){$("tr[data-server-address='"+a+"'] td#map").html("-");$("tr[data-server-address='"+a+"'] td#players a").html("-");$("tr[data-server-address='"+a+"'] td#ping").html("-");$("tr.players[data-server-address='"+a+"'] table tbody").html('<tr><td colspan="7" class="center">'+b+"</td></tr>")}function waitForJquery(){if(typeof window.jQuery=="undefined"){window.setTimeout(waitForJquery,50)}else{ls_parse_data()}}waitForJquery()